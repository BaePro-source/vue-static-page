<template>
  <div :class="['app', isDark ? 'theme-dark' : 'theme-light']">
    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <header class="nav">
      <div class="brand" @click="scrollTo('#hero')" role="button" aria-label="í™ˆìœ¼ë¡œ">
        <!-- MoonIcon ëŒ€ì²´: ë‹¨ìˆœ SVG -->
        <svg
            v-if="isDark"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            aria-hidden="true"
            style="margin-right:8px"
        >
          <path fill="currentColor" d="M12 2a9.99 9.99 0 0 0 0 20c5.52 0 10-4.48 10-10 0-4.41-2.86-8.15-6.84-9.46A8 8 0 0 1 12 2z"/>
        </svg>
        <svg
            v-else
            width="20"
            height="20"
            viewBox="0 0 24 24"
            aria-hidden="true"
            style="margin-right:8px"
        >
          <path fill="currentColor" d="M20 15.31A8 8 0 1 1 8.69 4 9.99 9.99 0 1 0 20 15.31z"/>
        </svg>
        <span>í•œê°€ìœ„ í•œ í˜ì´ì§€</span>
      </div>
      <nav class="links">
        <a href="#about">ì†Œê°œ</a>
        <a href="#foods">ì „í†µ ìŒì‹</a>
        <a href="#games">ì „í†µ ë†€ì´</a>
        <a href="#gallery">ê°¤ëŸ¬ë¦¬</a>
      </nav>
      <button class="toggle" @click="toggleTheme" :aria-pressed="isDark" aria-label="ë‹¬ ë°ê¸° ì „í™˜">
        <span v-if="isDark">ğŸŒ• ë°ê²Œ</span>
        <span v-else>ğŸŒ™ ì–´ë‘¡ê²Œ</span>
      </button>
    </header>

    <!-- íˆì–´ë¡œ -->
    <section id="hero" class="hero">
      <div class="lanterns">
        <div
            v-for="n in 5"
            :key="n"
            class="lantern"
            :style="{ animationDelay: (n * 0.6) + 's' }"
            aria-hidden="true"
        ></div>
      </div>
      <div class="hero-inner">
        <h1>í•œê°€ìœ„, ë³´ë¦„ë‹¬ì²˜ëŸ¼ ê°€ë“ ì°¬ <em>ë§ˆìŒ</em></h1>
        <p class="subtitle">
          ê°€ì¡±ê³¼ ì´ì›ƒì—ê²Œ ì˜¨ê¸°ë¥¼ ì „í•˜ëŠ” ë‚ , <strong>ì¶”ì„</strong>ì˜ ì´ì•¼ê¸°ë¥¼ ë‹´ì•˜ìŠµë‹ˆë‹¤.
        </p>
        <div class="cta">
          <a class="btn" href="#about">ë°”ë¡œ ë³´ê¸°</a>
          <button class="btn ghost" @click="toNext">ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤</button>
        </div>
        <!-- ì¹´ìš´íŠ¸ë‹¤ìš´ ì»´í¬ë„ŒíŠ¸ -->
        <Countdown target="2025-09-07T00:00:00" label="ì˜¬í•´ ì¶”ì„ê¹Œì§€" />
      </div>
      <div class="moon-wrap">
        <svg class="moon" viewBox="0 0 100 100" aria-hidden="true">
          <defs>
            <radialGradient id="g" cx="50%" cy="45%" r="60%">
              <stop offset="0%" :stop-color="cssVars.moonCore" />
              <stop offset="100%" :stop-color="cssVars.moonRing" />
            </radialGradient>
          </defs>
          <circle cx="50" cy="50" r="35" fill="url(#g)"/>
        </svg>
        <div class="cloud c1"></div>
        <div class="cloud c2"></div>
      </div>
    </section>

    <!-- ì†Œê°œ -->
    <section id="about" class="section about">
      <h2>í’ì„±í•œ ë§ˆìŒì„ ë‚˜ëˆ„ëŠ” ë‚ </h2>
      <p>
        í•œê°€ìœ„(ì¶”ì„)ëŠ” ìŒë ¥ 8ì›” 15ì¼ë¡œ, í•œ í•´ì˜ ìˆ˜í™•ì— ê°ì‚¬í•˜ê³  ê°€ì¡±Â·ì´ì›ƒê³¼ ì •ì„ ë‚˜ëˆ„ëŠ” í•œêµ­ì˜ ëŒ€í‘œ ëª…ì ˆì…ë‹ˆë‹¤.
        ì„±ë¬˜ì™€ ì°¨ë¡€, ë‚˜ëˆ”ê³¼ ë†€ì´, ê·¸ë¦¬ê³  ë§›ìˆëŠ” ìŒì‹ì´ ì–´ìš°ëŸ¬ì ¸ ëª¨ë‘ì˜ ì–¼êµ´ì— ë³´ë¦„ë‹¬ ê°™ì€ ë¯¸ì†Œê°€ ë²ˆì§€ëŠ” ë‚ ì…ë‹ˆë‹¤.
      </p>
      <ul class="features">
        <li>
          <span class="icon">ğŸ•¯ï¸</span>
          <div>
            <strong>ì •ì„±</strong>
            <p>ì¡°ìƒê»˜ ê°ì‚¬ë“œë¦¬ëŠ” ë§ˆìŒê³¼ ì„œë¡œë¥¼ ìœ„í•œ ë°°ë ¤ë¥¼ ë‹´ì•„ìš”.</p>
          </div>
        </li>
        <li>
          <span class="icon">ğŸ¤</span>
          <div>
            <strong>ë‚˜ëˆ”</strong>
            <p>ì´ì›ƒê³¼ ìŒì‹ì„ ë‚˜ëˆ„ê³  ë•ë‹´ì„ ì „í•˜ë©° ë”°ëœ»í•¨ì„ ë‚˜ëˆ ìš”.</p>
          </div>
        </li>
        <li>
          <span class="icon">ğŸ</span>
          <div>
            <strong>í¥ê²¨ì›€</strong>
            <p>ê°•ê°•ìˆ ë˜, ìœ·ë†€ì´ ë“± ì „í†µ ë†€ì´ë¡œ ì˜¨ ì„¸ëŒ€ê°€ ì–´ìš¸ë ¤ìš”.</p>
          </div>
        </li>
      </ul>
    </section>

    <!-- ì „í†µ ìŒì‹ -->
    <section id="foods" class="section grid two">
      <div class="text">
        <h2>ì „í†µ ìŒì‹</h2>
        <p class="lead">
          ì œì²  ì¬ë£Œë¡œ ë¹šì€ ìŒì‹ì€ <em>ê°ì‚¬</em>ì™€ <em>ì •ì„±</em>ì„ ë‹´ëŠ” ê·¸ë¦‡ì…ë‹ˆë‹¤.
        </p>
        <ul class="cards">
          <li>
            <h3>ì†¡í¸</h3>
            <p>ì†”ì í–¥ ë¨¸ê¸ˆì€ ë°˜ë‹¬ë–¡. ê¹¨Â·ì½©Â·ë°¤ ì†Œë¥¼ ë„£ì–´ ë¹šì–´ìš”.</p>
            <small>#ì«„ê¹ƒ #ì†”í–¥</small>
          </li>
          <li>
            <h3>ì „(ç…)</h3>
            <p>ë¶€ì¹¨ê°œÂ·ë™ê·¸ë‘ë•¡Â·ë°°ì¶”ì „ ë“± ë‹¤ì–‘í•œ ì „ìœ¼ë¡œ ìƒì„ í’ì„±í•˜ê²Œ.</p>
            <small>#ë…¸ë¦‡ë…¸ë¦‡ #í’ì„±í•œìƒ</small>
          </li>
          <li>
            <h3>ë‚˜ë¬¼</h3>
            <p>ì‹œê¸ˆì¹˜Â·ê³ ì‚¬ë¦¬Â·ë„ë¼ì§€ ë“± ì‚°í•´ì§„ë¯¸ì˜ ë‹´ë°±í•œ ì¡°í™”.</p>
            <small>#ì œì²  #ê· í˜•</small>
          </li>
        </ul>
      </div>
      <figure class="art">
        <div class="plate">
          <div class="rice"></div>
          <div class="piece p1"></div>
          <div class="piece p2"></div>
          <div class="piece p3"></div>
          <div class="leaf l1"></div>
          <div class="leaf l2"></div>
        </div>
        <figcaption>ê°„ë‹¨í•œ CSS ì¼ëŸ¬ìŠ¤íŠ¸ë¡œ í‘œí˜„í•œ í•œê°€ìœ„ í•œ ìƒ</figcaption>
      </figure>
    </section>

    <!-- ì „í†µ ë†€ì´ -->
    <section id="games" class="section games">
      <h2>ì „í†µ ë†€ì´</h2>
      <div class="chips">
        <span class="chip"><span class="emoji" aria-hidden="true">ğŸŒ€</span><span>ê°•ê°•ìˆ ë˜</span></span>
        <span class="chip"><span class="emoji" aria-hidden="true">ğŸªµ</span><span>ìœ·ë†€ì´</span></span>
        <span class="chip"><span class="emoji" aria-hidden="true">ğŸ¤¼</span><span>ì”¨ë¦„</span></span>
        <span class="chip"><span class="emoji" aria-hidden="true">ğŸª¢</span><span>ì¤„ë‹¤ë¦¬ê¸°</span></span>
        <span class="chip"><span class="emoji" aria-hidden="true">ğŸª</span><span>ì—°ë‚ ë¦¬ê¸°</span></span>
      </div>
      <p class="tip">ì‘ì€ ë§ˆë‹¹ì´ë‚˜ ê±°ì‹¤ì—ì„œë„ ê·œì¹™ì„ ë‹¨ìˆœí™”í•´ ì¶©ë¶„íˆ ì¦ê¸¸ ìˆ˜ ìˆì–´ìš”!</p>
    </section>

    <!-- ê°¤ëŸ¬ë¦¬ -->
    <section id="gallery" class="section gallery">
      <h2>ê°¤ëŸ¬ë¦¬</h2>
      <div class="grid four">
        <figure v-for="(g, i) in gallery" :key="i" class="tile">
          <img :src="g.src" :alt="g.alt" loading="lazy" />
          <figcaption>{{ g.alt }}</figcaption>
        </figure>
      </div>
    </section>

    <!-- í‘¸í„° -->
    <footer class="footer">
      <p>Â© {{ year }} í•œê°€ìœ„ í•œ í˜ì´ì§€ Â· ë³´ë¦„ë‹¬ì²˜ëŸ¼ ë„‰ë„‰í•œ í•˜ë£¨ ë˜ì„¸ìš”.</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { onMounted, ref, defineComponent } from 'vue'

/** ë‹¤í¬ëª¨ë“œ */
const isDark = ref<boolean>(window.matchMedia?.('(prefers-color-scheme: dark)').matches ?? false)
const toggleTheme = () => (isDark.value = !isDark.value)

/** ìŠ¤í¬ë¡¤ ìœ í‹¸ */
const scrollTo = (sel: string) => {
  document.querySelector(sel)?.scrollIntoView({ behavior: 'smooth', block: 'start' })
}
const toNext = () => scrollTo('#about')

/** ì—°ë„ */
const year = new Date().getFullYear()

/** ê°¤ëŸ¬ë¦¬(ë°ëª¨ìš©) */
type Photo = { src: string; alt: string }
const gallery = ref<Photo[]>([
  { src: 'https://images.unsplash.com/photo-1545249390-6bdfa286032f?q=80&w=1200&auto=format&fit=crop', alt: 'ê°€ì„ í•˜ëŠ˜ê³¼ ë‹¬' },
  { src: 'https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop', alt: 'í™©ê¸ˆ ë“¤íŒ' },
  { src: 'https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?q=80&w=1200&auto=format&fit=crop', alt: 'ë”°ëœ»í•œ ë“±ë¶ˆ' },
  { src: 'https://images.unsplash.com/photo-1500534623283-312aade485b7?q=80&w=1200&auto=format&fit=crop', alt: 'ê°€ì¡±ì˜ ì‹œê°„' },
])

/** ì ‘ê·¼ì„±: ì‹œìŠ¤í…œ í…Œë§ˆ ë³€ê²½ ê°ì§€ */
onMounted(() => {
  const mq = window.matchMedia?.('(prefers-color-scheme: dark)')
  const cb = (e: MediaQueryListEvent) => (isDark.value = e.matches)
  mq?.addEventListener?.('change', cb)
})

/** CSS ë³€ìˆ˜ ë°”ì¸ë”©ìš©(ê·¸ë¼ë””ì–¸íŠ¸ ìŠ¤í†± ì»¬ëŸ¬) */
const cssVars = {
  get moonCore() { return getComputedStyle(document.documentElement).getPropertyValue('--moon-core') || '#fff0c2' },
  get moonRing() { return getComputedStyle(document.documentElement).getPropertyValue('--moon-ring') || '#f59e0b44' },
}

/** JSX ì—†ì´ í…œí”Œë¦¿ì„ ì“°ëŠ” ë¡œì»¬ ì»´í¬ë„ŒíŠ¸ */
const Countdown = defineComponent({
  name: 'Countdown',
  props: {
    target: { type: String, required: true },
    label: { type: String, default: 'ë‚¨ì€ ì‹œê°„' }
  },
  setup(props) {
    const remain = ref<string>('ê³„ì‚° ì¤‘â€¦')
    const t = new Date(props.target).getTime()
    const tick = () => {
      const now = Date.now()
      const diff = Math.max(0, t - now)
      const d = Math.floor(diff / (1000 * 60 * 60 * 24))
      const h = Math.floor((diff / (1000 * 60 * 60)) % 24)
      const m = Math.floor((diff / (1000 * 60)) % 60)
      const s = Math.floor((diff / 1000) % 60)
      remain.value = `${d}ì¼ ${h}ì‹œê°„ ${m}ë¶„ ${s}ì´ˆ`
    }
    onMounted(() => {
      tick()
      id = window.setInterval(tick, 1000)
    })
    return { remain, props }
  },
  template: `
    <div class="countdown" role="status" aria-live="polite">
      <small class="count-label">{{ props.label }}</small>
      <div class="count-value">{{ remain }}</div>
    </div>
  `
})
</script>

<style scoped>
:root {
  --bg: #0b1020;
  --fg: #e6edf6;
  --muted: #b6c2d6;
  --primary: #ffd166;
  --accent: #7cc6ff;
  --surface: #151b2e;

  --moon-core: #fff6d5;
  --moon-ring: #ffd16644;
}

.theme-light {
  --bg: #f8fafc;
  --fg: #0b1020;
  --muted: #4b5563;
  --surface: #ffffff;
  --accent: #2563eb;
  --primary: #f59e0b;

  --moon-core: #fff0c2;
  --moon-ring: #f59e0b44;
}

.app {
  background: var(--bg);
  color: var(--fg);
  min-height: 100dvh;
  line-height: 1.6;
  font-synthesis-weight: none;
}

/* NAV */
.nav {
  position: sticky;
  top: 0;
  z-index: 10;
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 12px;
  align-items: center;
  padding: 12px 20px;
  background: color-mix(in srgb, var(--bg) 85%, transparent);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid color-mix(in srgb, var(--fg) 10%, transparent);
}
.brand {
  display: inline-flex;
  align-items: center;
  font-weight: 700;
  letter-spacing: .4px;
  cursor: pointer;
}
.links {
  display: none;
  gap: 14px;
}
.links a {
  color: var(--muted);
  text-decoration: none;
  font-weight: 600;
}
.links a:hover { color: var(--fg); }
.toggle {
  border: 1px solid color-mix(in srgb, var(--fg) 15%, transparent);
  background: var(--surface);
  color: var(--fg);
  padding: 8px 12px;
  border-radius: 999px;
  cursor: pointer;
}
@media (min-width: 860px) {
  .links { display: inline-flex; }
}

/* HERO */
.hero {
  position: relative;
  overflow: hidden;
  padding: 96px 20px 72px;
  isolation: isolate;
}
.hero-inner {
  max-width: 980px;
  margin: 0 auto;
  text-align: center;
}
.hero h1 {
  font-size: clamp(28px, 4vw, 52px);
  letter-spacing: .3px;
}
.hero .subtitle {
  color: var(--muted);
  margin: 10px auto 22px;
  max-width: 680px;
}
.cta {
  display: inline-flex;
  gap: 10px;
  margin-bottom: 18px;
}
.btn {
  padding: 10px 16px;
  border-radius: 12px;
  border: 1px solid color-mix(in srgb, var(--fg) 12%, transparent);
  background: var(--primary);
  color: #1f2937;
  font-weight: 700;
  cursor: pointer;
  text-decoration: none;
}
.btn.ghost {
  background: transparent;
  color: var(--fg);
}
.moon-wrap {
  position: absolute;
  inset: 0 0 auto 50%;
  translate: -50% -10%;
  pointer-events: none;
  z-index: -1;
}
.moon {
  width: min(56vmin, 560px);
  filter: drop-shadow(0 0 30px color-mix(in srgb, var(--primary) 40%, transparent));
}

/* êµ¬ë¦„ */
.cloud {
  position: absolute; top: 35%; left: 50%;
  width: 180px; height: 60px; border-radius: 999px;
  background: color-mix(in srgb, var(--fg) 10%, transparent);
  filter: blur(2px);
  animation: floatX 26s linear infinite;
}
.cloud.c1 { top: 32%; left: 18%; width: 240px; height: 70px; animation-duration: 32s; }
.cloud.c2 { top: 48%; left: 68%; width: 220px; height: 64px; animation-duration: 28s; }
@keyframes floatX {
  from { transform: translateX(-40vw); }
  to { transform: translateX(40vw); }
}

/* ë“±(ëœí„´) */
.lanterns { position: absolute; inset: 0; pointer-events: none; }
.lantern {
  --rand: 0.3;
  position: absolute;
  left: calc(10% + 80% * var(--rand, 0));
  top: -60px;
  width: 14px; height: 18px;
  background: radial-gradient(circle at 50% 30%, #ffd166 0 40%, #ffb703 41% 100%);
  border-radius: 4px 4px 10px 10px;
  box-shadow: 0 0 10px #ffd166aa, 0 0 20px #ffd16655;
  animation: fall 12s linear infinite, swing 2.4s ease-in-out infinite alternate;
}
.lantern::after {
  content: '';
  position: absolute; inset: -4px; border-top: 2px solid #ffd16666;
}
@keyframes fall { from { transform: translateY(-10vh); } to { transform: translateY(110vh); } }
@keyframes swing { from { transform: rotate(-4deg); } to { transform: rotate(4deg); } }

/* COUNTDOWN */
.countdown {
  display: inline-grid;
  gap: 4px;
  padding: 8px 12px;
  border-radius: 10px;
  margin-top: 12px;
  background: color-mix(in srgb, var(--surface) 80%, transparent);
  border: 1px solid color-mix(in srgb, var(--fg) 12%, transparent);
}
.count-label { color: var(--muted); }
.count-value { font-weight: 800; letter-spacing: .5px; }

/* ê³µí†µ ì„¹ì…˜ */
.section { padding: 72px 20px; }
.section > h2 {
  text-align: center;
  margin: 0 auto 14px;
  font-size: clamp(22px, 3vw, 32px);
}
.section > p.lead {
  text-align: center;
  margin: 0 auto 24px;
  max-width: 720px;
  color: var(--muted);
}

/* ì†Œê°œ */
.about { max-width: 980px; margin: 0 auto; }
.features { display: grid; gap: 16px; margin-top: 22px; }
.features li {
  display: grid; grid-template-columns: 40px 1fr; gap: 12px;
  padding: 12px; border-radius: 12px;
  background: color-mix(in srgb, var(--surface) 80%, transparent);
  border: 1px solid color-mix(in srgb, var(--fg) 10%, transparent);
}
.features .icon { font-size: 22px; }

/* ìŒì‹ ì„¹ì…˜ */
.grid.two { display: grid; gap: 26px; max-width: 1100px; margin: 0 auto; }
@media (min-width: 960px) {
  .grid.two { grid-template-columns: 1.1fr .9fr; align-items: center; }
}
.cards { display: grid; gap: 12px; margin-top: 18px; }
.cards li {
  padding: 14px; border-radius: 12px;
  background: color-mix(in srgb, var(--surface) 80%, transparent);
  border: 1px solid color-mix(in srgb, var(--fg) 10%, transparent);
}
.cards h3 { margin: 0 0 4px; }
.cards small { color: var(--muted); }

/* CSS ì¼ëŸ¬ìŠ¤íŠ¸ */
.art { text-align: center; }
.plate {
  --plate: color-mix(in srgb, var(--fg) 8%, transparent);
  width: clamp(240px, 40vmin, 360px);
  height: clamp(240px, 40vmin, 360px);
  margin: 0 auto;
  border-radius: 50%;
  background: radial-gradient(circle at 50% 50%, var(--plate) 0 70%, transparent 71% 100%);
  position: relative;
}
.rice { position: absolute; inset: 22% 22%; border-radius: 50%; background: radial-gradient(circle at 40% 40%, #fff 0 60%, #ddd 61% 100%); }
.piece { position: absolute; width: 46px; height: 26px; border-radius: 16px; }
.p1 { background: #f59e0b; left: 30%; top: 28%; rotate: -12deg; }
.p2 { background: #22c55e; right: 26%; top: 42%; rotate: 8deg; }
.p3 { background: #ef4444; left: 42%; bottom: 26%; rotate: 18deg; }
.leaf { position: absolute; width: 36px; height: 18px; border-radius: 18px 2px 18px 2px; background: #10b981; }
.l1 { left: 18%; top: 44%; rotate: -20deg; }
.l2 { right: 18%; top: 30%; rotate: 14deg; }
figcaption { color: var(--muted); margin-top: 10px; }

/* ë†€ì´ */
.games { text-align: center; }
.chips { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 16px; }
.chip {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 8px 12px; border-radius: 999px; font-weight: 600;
  background: color-mix(in srgb, var(--surface) 80%, transparent);
  border: 1px solid color-mix(in srgb, var(--fg) 12%, transparent);
}
.chip .emoji { filter: drop-shadow(0 1px 0 color-mix(in srgb, var(--fg) 10%, transparent)); }
.tip { color: var(--muted); margin-top: 12px; }

/* ê°¤ëŸ¬ë¦¬ */
.gallery { max-width: 1100px; margin: 0 auto; }
.grid.four {
  display: grid; gap: 12px;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
}
.tile {
  border-radius: 12px; overflow: hidden;
  background: color-mix(in srgb, var(--surface) 80%, transparent);
  border: 1px solid color-mix(in srgb, var(--fg) 10%, transparent);
}
.tile img { width: 100%; height: 180px; object-fit: cover; display: block; }
.tile figcaption { padding: 8px 10px; color: var(--muted); }

/* í‘¸í„° */
.footer { text-align: center; padding: 40px 20px 60px; color: var(--muted); }
</style>
